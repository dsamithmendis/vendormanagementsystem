<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>HOME | VENDOR MANAGEMENT SYSTEM</title>
    <link rel="stylesheet" href="../../../body/styles.css" />
    <link rel="stylesheet" href="../../../header/styles.css" />
    <link rel="stylesheet" href="../../../footer/styles.css" />
    <link rel="stylesheet" href="../../../slider/styles.css" />
    <link rel="stylesheet" href="../../../btn/styles.css" />
    <link rel="stylesheet" href="../../../nav/styles.css" />
    <link rel="stylesheet" href="../../home/frontend/styles.css" />
  </head>
  <body>
    <div class="slider" aria-hidden="true">
      <div class="slides" id="slides">
        <div class="slide">
          <img src="../../../images/slide01.png" alt="Slide 1" />
        </div>
        <div class="slide">
          <img src="../../../images/slide02.png" alt="Slide 2" />
        </div>
        <div class="slide">
          <img src="../../../images/slide03.png" alt="Slide 3" />
        </div>
      </div>
    </div>
    <header>
      <div class="header-logo">
        <img
          src="../../../images/logo.png"
          alt="Vendor Management System Logo"
          class="logo"
          onclick="window.location.href='/vendormanagementsystem/index.html'"
        />
      </div>
      <div class="header-wrapper">
        <h1>VENDOR MANAGEMENT SYSTEM</h1>
      </div>
      <div class="header-btn">
        <button
          type="button"
          class="btn btn-danger"
          onclick="window.location.href='/vendormanagementsystem/connection/logout.php'"
        >
          Logout
        </button>
      </div>
    </header>
    <nav id="mainNav" aria-label="Main Navigation">
      <ul>
        <li>
          <a
            href="/vendormanagementsystem/user/storeproduct/backend/storeproduct.php"
            >STORE PRODUCT</a
          >
        </li>
        <li>
          <a
            href="/vendormanagementsystem/user/buyproduct/backend/buyproduct.php"
            >BUY PRODUCT</a
          >
        </li>
        <li>
          <a href="/vendormanagementsystem/user/cart/backend/cart.php">CART</a>
        </li>
        <li>
          <a href="/vendormanagementsystem/user/history/backend/history.php"
            >HISTORY</a
          >
        </li>
      </ul>
    </nav>
    <main>
      <div class="profile-container">
        <img
          src="../../../uploads/profile_images/{{username}}_profile.jpg"
          alt="Profile Picture"
          class="profile-picture"
          width="150"
          height="150"
        />
        <div class="profile-info">
          <h2>Welcome, {{username}}</h2>
          <p><strong>Email:</strong> {{email}}</p>
          <p><strong>Role:</strong> {{usertype}}</p>
          <p><strong>Contact:</strong> {{contact}}</p>
          <p><strong>Vendor ID:</strong> {{vendorid}}</p>
        </div>
        <div class="profile-actions">
          <button class="btn btn-primary">Edit Profile</button>
        </div>
      </div>
    </main>
    <footer>
      <div class="footer-content">
        <p>Â© 2024 All Rights Reserved By Samith Mendis</p>
      </div>
    </footer>
    <script src="../../../slider/scripts.js"></script>
    <div id="editProfileModal" class="modal">
      <div class="modal-content">
        <span id="closeModal">&times;</span>
        <h2>Edit Profile</h2>
        <form
          method="POST"
          action="edit_profile.php"
          enctype="multipart/form-data"
        >
          <label>Profile Image:</label>
          <input
            type="file"
            name="profile_image"
            accept="image/*"
            onchange="previewImage(event)"
          />
          <img
            id="preview"
            class="image-preview"
            src="{{profile_image}}"
            alt="Preview"
            style="
              width: 430px;
              height: 430px;
              object-fit: cover;
              border-radius: 8px;
            "
          />
          <label>Email:</label>
          <input type="email" name="email" value="{{email}}" required />
          <label>Contact:</label>
          <input type="text" name="contact" value="{{contact}}" required />
          <hr style="margin: 20px 0; border-color: #444" />
          <h3>Change Password</h3>
          <label>Current Password:</label>
          <input type="password" name="current_password" />
          <label>New Password:</label>
          <input type="password" name="new_password" />
          <label>Confirm New Password:</label>
          <input type="password" name="confirm_password" />
          <button type="submit" class="btn btn-primary">Save Changes</button>
        </form>
      </div>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const modal = document.getElementById("editProfileModal");
        const openBtn = document.querySelector(".profile-actions .btn-primary");
        const closeBtn = document.getElementById("closeModal");
        openBtn.onclick = () => {
          modal.style.display = "block";
          document.body.classList.add("modal-open");
        };
        closeBtn.onclick = () => {
          modal.style.display = "none";
          document.body.classList.remove("modal-open");
        };
        window.onclick = (e) => {
          if (e.target === modal) {
            modal.style.display = "none";
            document.body.classList.remove("modal-open");
          }
        };
      });
      function previewImage(event) {
        const preview = document.getElementById("preview");
        preview.src = URL.createObjectURL(event.target.files[0]);
      }
    </script>
  </body>
</html>
